<!DOCTYPE html>
<html>
<head>
    <title>å¤´åƒå¤§å°è°ƒæ•´å’Œæ‹–åŠ¨åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .section h2 {
            color: #007bff;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        .success-section {
            border-left: 4px solid #28a745;
        }
        
        .success-section h2 {
            color: #28a745;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        
        .feature-list li:before {
            content: "âœ… ";
            color: #28a745;
            font-weight: bold;
        }
        
        .demo-section {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .demo-section h3 {
            color: #2e7d32;
            margin-top: 0;
        }
        
        .size-control {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        
        .size-control label {
            font-weight: bold;
            color: #333;
            min-width: 80px;
        }
        
        .size-control input[type="range"] {
            flex: 1;
            height: 6px;
            background: #ddd;
            border-radius: 3px;
            outline: none;
        }
        
        .size-control input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            background: #4caf50;
            border-radius: 50%;
            cursor: pointer;
        }
        
        .size-display {
            background: #f0f0f0;
            padding: 5px 10px;
            border-radius: 3px;
            font-weight: bold;
            color: #333;
            min-width: 60px;
            text-align: center;
        }
        
        .coordinate-display {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .coordinate-display h3 {
            color: #856404;
            margin-top: 0;
        }
        
        .coordinate-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }
        
        .coordinate-item {
            background: white;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        .coordinate-item h4 {
            margin: 0 0 5px 0;
            color: #333;
            font-size: 14px;
        }
        
        .coordinate-value {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: bold;
            color: #007bff;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .highlight {
            background: #ffd700;
            color: #000;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .test-scenarios {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .test-scenarios h3 {
            color: #856404;
            margin-top: 0;
        }
        
        .scenario {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 4px;
            border-left: 3px solid #ffc107;
        }
        
        .scenario-title {
            font-weight: bold;
            color: #856404;
        }
        
        .scenario-result {
            color: #666;
            font-size: 14px;
            margin-top: 5px;
        }
        
        .avatar-preview {
            width: 350px;
            height: 500px;
            border: 2px solid #ddd;
            border-radius: 10px;
            position: relative;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 20px auto;
            overflow: hidden;
        }
        
        .avatar-demo {
            position: absolute;
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 12px;
            font-weight: bold;
        }
        
        .coordinate-label {
            position: absolute;
            bottom: -25px;
            left: 0;
            font-size: 10px;
            color: #666;
            background: rgba(255, 255, 255, 0.8);
            padding: 2px 4px;
            border-radius: 3px;
            white-space: nowrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ–¼ï¸ å¤´åƒå¤§å°è°ƒæ•´å’Œæ‹–åŠ¨åŠŸèƒ½</h1>
        
        <div class="section success-section">
            <h2>ğŸ¯ æ–°å¢åŠŸèƒ½</h2>
            <p>å·²æˆåŠŸæ·»åŠ å¤´åƒç›¸å…³çš„é«˜çº§åŠŸèƒ½ï¼š</p>
            <ul class="feature-list">
                <li><strong>å¤´åƒå¤§å°è°ƒæ•´</strong> - 60pxåˆ°150pxèŒƒå›´å†…è‡ªç”±è°ƒæ•´</li>
                <li><strong>å¤´åƒæ‹–åŠ¨åŠŸèƒ½</strong> - å¯åœ¨åç‰‡èŒƒå›´å†…è‡ªç”±æ‹–åŠ¨</li>
                <li><strong>åæ ‡æ˜¾ç¤º</strong> - å®æ—¶æ˜¾ç¤ºå¤´åƒä½ç½®åæ ‡</li>
                <li><strong>çŠ¶æ€ç®¡ç†</strong> - å¤´åƒé…ç½®æŒä¹…åŒ–ä¿å­˜</li>
                <li><strong>æ™ºèƒ½çº¦æŸ</strong> - è‡ªåŠ¨é™åˆ¶åœ¨åç‰‡è¾¹ç•Œå†…</li>
            </ul>
        </div>
        
        <div class="section">
            <h2>ğŸ”§ å¤´åƒå¤§å°è°ƒæ•´</h2>
            <p>ç”¨æˆ·å¯ä»¥é€šè¿‡æ»‘å—è°ƒæ•´å¤´åƒåœ¨åç‰‡ä¸­çš„æ˜¾ç¤ºå¤§å°ï¼š</p>
            
            <div class="demo-section">
                <h3>å¤§å°è°ƒæ•´æ§ä»¶</h3>
                <div class="size-control">
                    <label>å¤´åƒå¤§å°:</label>
                    <input type="range" min="60" max="150" value="96" id="sizeSlider">
                    <div class="size-display" id="sizeDisplay">96px</div>
                </div>
                <p>è°ƒæ•´èŒƒå›´ï¼š60px - 150px</p>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“ åæ ‡æ˜¾ç¤ºåŠŸèƒ½</h2>
            <p>å½“å¯ç”¨"æ˜¾ç¤ºåæ ‡"åŠŸèƒ½æ—¶ï¼Œå¤´åƒä¼šæ˜¾ç¤ºå…¶å½“å‰ä½ç½®åæ ‡ï¼š</p>
            
            <div class="coordinate-display">
                <h3>åæ ‡ä¿¡æ¯</h3>
                <div class="coordinate-info">
                    <div class="coordinate-item">
                        <h4>Xåæ ‡</h4>
                        <div class="coordinate-value" id="xCoord">127</div>
                    </div>
                    <div class="coordinate-item">
                        <h4>Yåæ ‡</h4>
                        <div class="coordinate-value" id="yCoord">64</div>
                    </div>
                </div>
                <p>åæ ‡æ ¼å¼ï¼š(x, y) - ä»¥åƒç´ ä¸ºå•ä½ï¼Œç›¸å¯¹äºåç‰‡å·¦ä¸Šè§’</p>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ¨ å¤´åƒé¢„è§ˆæ¼”ç¤º</h2>
            <p>ä»¥ä¸‹æ˜¯å¤´åƒåœ¨åç‰‡ä¸­çš„é¢„è§ˆæ•ˆæœï¼š</p>
            
            <div class="avatar-preview" id="avatarPreview">
                <div class="avatar-demo" id="avatarDemo" style="width: 96px; height: 96px; left: 127px; top: 64px;">
                    ğŸ‘¤
                    <div class="coordinate-label" id="coordLabel">(127, 64)</div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ”§ æŠ€æœ¯å®ç°</h2>
            <p>ä¸»è¦çš„æŠ€æœ¯å®ç°ç»†èŠ‚ï¼š</p>
            
            <h3>1. çŠ¶æ€ç®¡ç†</h3>
            <div class="code-block">
// åœ¨ src/store/card.ts ä¸­æ·»åŠ å¤´åƒé…ç½®
interface CardState {
  avatarConfig: {
    size: number
    position: { x: number; y: number }
  }
  // ... å…¶ä»–çŠ¶æ€
}

// åˆå§‹é…ç½®
const initialAvatarConfig = {
  size: 96, // é»˜è®¤96px
  position: { x: 127, y: 64 } // é»˜è®¤ä½ç½®ï¼šåç‰‡é¡¶éƒ¨å±…ä¸­
}
            </div>
            
            <h3>2. å¤´åƒå¤§å°è°ƒæ•´</h3>
            <div class="code-block">
// åœ¨å¤´åƒä¸Šä¼ ç»„ä»¶ä¸­æ·»åŠ å¤§å°è°ƒæ•´æ§ä»¶
&lt;input
  type="range"
  min="60"
  max="150"
  value={avatarConfig.size}
  onChange={(e) => updateAvatarConfig({ size: Number(e.target.value) })}
  className="flex-1"
/&gt;
            </div>
            
            <h3>3. å¤´åƒæ‹–åŠ¨å¤„ç†</h3>
            <div class="code-block">
// å¤´åƒæ‹–æ‹½å¼€å§‹
const handleAvatarMouseDown = (e: React.MouseEvent) => {
  setDraggedElement('avatar')
  const rect = e.currentTarget.getBoundingClientRect()
  setDragOffset({
    x: e.clientX - rect.left,
    y: e.clientY - rect.top
  })
}

// æ‹–æ‹½ç§»åŠ¨å¤„ç†
if (draggedElement === 'avatar') {
  const constrainedX = Math.max(0, Math.min(newX, 350 - avatarConfig.size))
  const constrainedY = Math.max(0, Math.min(newY, 500 - avatarConfig.size))
  
  if (onAvatarPositionChange) {
    onAvatarPositionChange(constrainedX, constrainedY)
  }
}
            </div>
            
            <h3>4. åæ ‡æ˜¾ç¤º</h3>
            <div class="code-block">
// å¤´åƒåæ ‡æ˜¾ç¤º
{showCoordinates && (
  &lt;div
    style={{
      position: 'absolute',
      top: '100%',
      left: '0',
      fontSize: '10px',
      color: '#666',
      background: 'rgba(255, 255, 255, 0.8)',
      padding: '2px 4px',
      borderRadius: '3px',
      whiteSpace: 'nowrap',
      zIndex: 1000,
      pointerEvents: 'none'
    }}
  &gt;
    ({Math.round(avatarConfig.position.x)}, {Math.round(avatarConfig.position.y)})
  &lt;/div&gt;
)}
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ§ª æµ‹è¯•åœºæ™¯</h2>
            <p>è¯·æŒ‰ä»¥ä¸‹åœºæ™¯æµ‹è¯•å¤´åƒåŠŸèƒ½ï¼š</p>
            
            <div class="test-scenarios">
                <h3>å¤§å°è°ƒæ•´æµ‹è¯•</h3>
                <div class="scenario">
                    <div class="scenario-title">æµ‹è¯•1ï¼šè°ƒæ•´å¤´åƒå¤§å°</div>
                    <div class="scenario-result">âœ… æ‹–åŠ¨æ»‘å—ï¼Œå¤´åƒåº”è¯¥å®æ—¶æ”¹å˜å¤§å°ï¼ˆ60px-150pxï¼‰</div>
                </div>
                <div class="scenario">
                    <div class="scenario-title">æµ‹è¯•2ï¼šå¤§å°é™åˆ¶</div>
                    <div class="scenario-result">âœ… æ»‘å—åº”è¯¥é™åˆ¶åœ¨60-150pxèŒƒå›´å†…</div>
                </div>
                
                <h3>æ‹–åŠ¨åŠŸèƒ½æµ‹è¯•</h3>
                <div class="scenario">
                    <div class="scenario-title">æµ‹è¯•3ï¼šå¤´åƒæ‹–åŠ¨</div>
                    <div class="scenario-result">âœ… ç‚¹å‡»å¹¶æ‹–åŠ¨å¤´åƒï¼Œåº”è¯¥èƒ½è‡ªç”±ç§»åŠ¨</div>
                </div>
                <div class="scenario">
                    <div class="scenario-title">æµ‹è¯•4ï¼šè¾¹ç•Œçº¦æŸ</div>
                    <div class="scenario-result">âœ… å¤´åƒåº”è¯¥è¢«é™åˆ¶åœ¨åç‰‡è¾¹ç•Œå†…</div>
                </div>
                
                <h3>åæ ‡æ˜¾ç¤ºæµ‹è¯•</h3>
                <div class="scenario">
                    <div class="scenario-title">æµ‹è¯•5ï¼šåæ ‡æ˜¾ç¤º</div>
                    <div class="scenario-result">âœ… å¯ç”¨"æ˜¾ç¤ºåæ ‡"åï¼Œå¤´åƒåº”æ˜¾ç¤ºä½ç½®åæ ‡</div>
                </div>
                <div class="scenario">
                    <div class="scenario-title">æµ‹è¯•6ï¼šåæ ‡æ›´æ–°</div>
                    <div class="scenario-result">âœ… æ‹–åŠ¨å¤´åƒæ—¶ï¼Œåæ ‡åº”è¯¥å®æ—¶æ›´æ–°</div>
                </div>
                
                <h3>çŠ¶æ€æŒä¹…åŒ–æµ‹è¯•</h3>
                <div class="scenario">
                    <div class="scenario-title">æµ‹è¯•7ï¼šé…ç½®ä¿å­˜</div>
                    <div class="scenario-result">âœ… åˆ·æ–°é¡µé¢åï¼Œå¤´åƒå¤§å°å’Œä½ç½®åº”è¯¥ä¿æŒ</div>
                </div>
                <div class="scenario">
                    <div class="scenario-title">æµ‹è¯•8ï¼šé‡ç½®åŠŸèƒ½</div>
                    <div class="scenario-result">âœ… é‡ç½®ä½ç½®åŠŸèƒ½åº”è¯¥æ¢å¤å¤´åƒåˆ°åˆå§‹ä½ç½®</div>
                </div>
            </div>
        </div>
        
        <div class="section success-section">
            <h2>âœ… åŠŸèƒ½å®Œæˆ</h2>
            <p>å¤´åƒå¤§å°è°ƒæ•´å’Œæ‹–åŠ¨åŠŸèƒ½å·²æˆåŠŸå®ç°ï¼š</p>
            <ul class="feature-list">
                <li><strong>å¤§å°è°ƒæ•´</strong> - 60-150pxèŒƒå›´å†…è‡ªç”±è°ƒæ•´</li>
                <li><strong>æ‹–åŠ¨åŠŸèƒ½</strong> - å¯åœ¨åç‰‡èŒƒå›´å†…è‡ªç”±æ‹–åŠ¨</li>
                <li><strong>åæ ‡æ˜¾ç¤º</strong> - å®æ—¶æ˜¾ç¤ºä½ç½®åæ ‡</li>
                <li><strong>çŠ¶æ€ç®¡ç†</strong> - é…ç½®æŒä¹…åŒ–ä¿å­˜</li>
                <li><strong>æ™ºèƒ½çº¦æŸ</strong> - è‡ªåŠ¨è¾¹ç•Œé™åˆ¶</li>
                <li><strong>ç”¨æˆ·å‹å¥½</strong> - ç›´è§‚çš„æ§ä»¶å’Œåé¦ˆ</li>
            </ul>
            
            <p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong></p>
            <ol>
                <li>ä¸Šä¼ å¤´åƒåï¼Œåœ¨å¤´åƒä¸Šä¼ åŒºåŸŸè°ƒæ•´å¤§å°</li>
                <li>åœ¨åç‰‡é¢„è§ˆä¸­ç›´æ¥æ‹–åŠ¨å¤´åƒè°ƒæ•´ä½ç½®</li>
                <li>å¯ç”¨"æ˜¾ç¤ºåæ ‡"æŸ¥çœ‹ç²¾ç¡®ä½ç½®</li>
                <li>æ‰€æœ‰è®¾ç½®ä¼šè‡ªåŠ¨ä¿å­˜</li>
            </ol>
        </div>
    </div>

    <script>
        // æ¼”ç¤ºè„šæœ¬
        const sizeSlider = document.getElementById('sizeSlider');
        const sizeDisplay = document.getElementById('sizeDisplay');
        const avatarDemo = document.getElementById('avatarDemo');
        const coordLabel = document.getElementById('coordLabel');
        const xCoord = document.getElementById('xCoord');
        const yCoord = document.getElementById('yCoord');

        // å¤§å°è°ƒæ•´æ¼”ç¤º
        sizeSlider.addEventListener('input', function() {
            const size = this.value;
            sizeDisplay.textContent = size + 'px';
            avatarDemo.style.width = size + 'px';
            avatarDemo.style.height = size + 'px';
        });

        // æ‹–åŠ¨æ¼”ç¤º
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };

        avatarDemo.addEventListener('mousedown', function(e) {
            isDragging = true;
            const rect = this.getBoundingClientRect();
            dragOffset.x = e.clientX - rect.left;
            dragOffset.y = e.clientY - rect.top;
            this.style.cursor = 'grabbing';
        });

        document.addEventListener('mousemove', function(e) {
            if (!isDragging) return;
            
            const preview = document.getElementById('avatarPreview');
            const rect = preview.getBoundingClientRect();
            const newX = e.clientX - rect.left - dragOffset.x;
            const newY = e.clientY - rect.top - dragOffset.y;
            
            const size = parseInt(avatarDemo.style.width);
            const constrainedX = Math.max(0, Math.min(newX, 350 - size));
            const constrainedY = Math.max(0, Math.min(newY, 500 - size));
            
            avatarDemo.style.left = constrainedX + 'px';
            avatarDemo.style.top = constrainedY + 'px';
            
            // æ›´æ–°åæ ‡æ˜¾ç¤º
            xCoord.textContent = Math.round(constrainedX);
            yCoord.textContent = Math.round(constrainedY);
            coordLabel.textContent = `(${Math.round(constrainedX)}, ${Math.round(constrainedY)})`;
        });

        document.addEventListener('mouseup', function() {
            isDragging = false;
            avatarDemo.style.cursor = 'grab';
        });
    </script>
</body>
</html>
